# üöÄ Deployment Guide –¥–ª—è your-domain.com

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-–¥–µ–ø–ª–æ—è)
2. [–ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞](#–ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞)
3. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤](#–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-—Å–∫—Ä–∏–ø—Ç–æ–≤)
4. [Git Hooks (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥)](#git-hooks)
5. [Pre-deployment Checklist](#pre-deployment-checklist)
6. [Smoke Tests](#smoke-tests)
7. [Rollback](#rollback)
8. [Hotfix](#hotfix)

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è

### 1Ô∏è‚É£ –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ DEV (Initial Setup)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–µ—Ä–≤–∏—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è:**
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã WordPress (git clone)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ò–º–ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–µ—Ç–∫–æ–π `dev`

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ DEV
ssh your_ssh_user@your_server_ip

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /home/your_ssh_user
git clone -b dev https://github.com/Ad-Ok/wordpress-docker-setup.git dev.your-domain.com

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏
mkdir -p backups-dev logs

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞
chmod 755 dev.your-domain.com
chmod 644 dev.your-domain.com/wp-config.php

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É (–µ—Å–ª–∏ –µ—Å—Ç—å)
cd dev.your-domain.com
wp db import path/to/backup.sql

# –û–±–Ω–æ–≤–∏—Ç—å URL (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
wp search-replace 'http://old-url.com' 'https://dev.your-domain.com'
```

---

### 2Ô∏è‚É£ –†—è–¥–æ–≤–æ–π –¥–µ–ø–ª–æ–π –Ω–∞ DEV (Regular Updates)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø—É—à –≤ –≤–µ—Ç–∫—É `dev`

**–ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è:**
- ‚úÖ –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (git pull)
- ‚úÖ –°–æ–±—Ä–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã (CSS/JS) ‚Äî —É–∂–µ –≤ git!
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–µ—Å–ª–∏ –µ—Å—Ç—å)
- ‚ùå –ù–µ —Ç—Ä–æ–≥–∞–µ–º uploads, node_modules

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ: –∫–æ–º–º–∏—Ç —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –±–∏–ª–¥–æ–º
cd /path/to/your/project
git add .
git commit -m "feat: add new feature"  # pre-commit hook –±–∏–ª–¥–∏—Ç –∞—Å—Å–µ—Ç—ã
git push origin dev

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
./deployment-scripts/deploy-dev.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. Git pull –Ω–∞ DEV —Å–µ—Ä–≤–µ—Ä–µ
2. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
4. –ì–æ—Ç–æ–≤–æ! ‚úÖ

---

### 3Ô∏è‚É£ –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ PROD (Production Launch)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ production

**–ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è:**
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã (git clone –∏–∑ `main`)
- ‚úÖ Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ò–º–ø–æ—Ä—Ç/–º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- ‚úÖ SSL, –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ Search-replace –¥–ª—è –¥–æ–º–µ–Ω–∞

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ PROD
ssh your_ssh_user@your_server_ip

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
cd /home/your_ssh_user
git clone -b main https://github.com/Ad-Ok/wordpress-docker-setup.git your-domain.com

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏
mkdir -p backups logs

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞
chmod 755 your-domain.com
chmod 644 your-domain.com/wp-config.php
chown -R www-data:www-data your-domain.com/wp-content/uploads

# –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É
cd your-domain.com
wp db import path/to/prod-backup.sql

# –û–±–Ω–æ–≤–∏—Ç—å URL
wp search-replace 'https://dev.your-domain.com' 'https://your-domain.com'

# Flush permalinks
wp rewrite flush
```

---

### 4Ô∏è‚É£ –†–µ–ª–∏–∑–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ PROD (Release Deployment)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –í—ã–∫–∞—Ç–∫–∞ –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ –∏–∑ `dev` ‚Üí `prod`

**–ß—Ç–æ –¥–µ–ø–ª–æ–∏—Ç—Å—è:**
- ‚úÖ –¢–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (git pull)
- ‚úÖ –°–æ–±—Ä–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã (—É–∂–µ –≤ git)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- ‚ùå –ù–µ —Ç—Ä–æ–≥–∞–µ–º uploads, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ: —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ dev -> main
cd /path/to/your/project

# –°–æ–∑–¥–∞—Ç—å PR –∏–ª–∏ merge –Ω–∞–ø—Ä—è–º—É—é
git checkout main
git pull origin main
git merge dev
git push origin main

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π —Å–∫—Ä–∏–ø—Ç
./deployment-scripts/deploy-prod.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. **Pre-deployment checklist** (10 –ø—Ä–æ–≤–µ—Ä–æ–∫)
2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–ë—ç–∫–∞–ø –ë–î + —Ñ–∞–π–ª–æ–≤**
4. Maintenance mode ON
5. Git pull –Ω–∞ PROD
6. –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
7. –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
8. Maintenance mode OFF
9. **Smoke tests** (8 —Ç–µ—Å—Ç–æ–≤)
10. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ

---

### 5Ô∏è‚É£ Hotfix (–°—Ä–æ—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –Ω–∞ –ø—Ä–æ–¥–µ

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
./deployment-scripts/hotfix.sh "Fix critical cart bug"
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–æ–∑–¥–∞—ë—Ç –≤–µ—Ç–∫—É `hotfix/fix-critical-cart-bug`
2. –ö–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. Push –≤ remote
4. –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç: merge –≤ `main` —Å–µ–π—á–∞—Å?
5. –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç: deploy –Ω–∞ PROD —Å–µ–π—á–∞—Å?
6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç hotfix –≤–µ—Ç–∫—É

---

### 6Ô∏è‚É£ Rollback (–û—Ç–∫–∞—Ç)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

**–ö–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

```bash
./deployment-scripts/rollback.sh prod
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤
2. –í—ã–±–∏—Ä–∞–µ—à—å –Ω—É–∂–Ω—ã–π
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î + —Ñ–∞–π–ª–æ–≤
5. –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
6. –ì–æ—Ç–æ–≤–æ!

---

## ‚öôÔ∏è –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
cd deployment-scripts
cp config.example.sh config.sh
nano config.sh  # –ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ creds.txt
chmod 600 config.sh  # –ó–∞—â–∏—Ç–∏—Ç—å —Ñ–∞–π–ª
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSH –∫–ª—é—á–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
ssh-keygen -t ed25519 -C "deploy@your-domain.com"

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id your_ssh_user@your_server_ip

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
ssh your_ssh_user@your_server_ip "echo 'SSH works!'"
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Git Hooks

```bash
# –•—É–∫ —É–∂–µ —Å–æ–∑–¥–∞–Ω –≤ .git/hooks/pre-commit
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
ls -la .git/hooks/pre-commit

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
cp deployment-scripts/git-hooks/pre-commit .git/hooks/
chmod +x .git/hooks/pre-commit
```

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å package.json –≤ —Ç–µ–º–µ

```bash
cd www/wordpress/wp-content/themes/your-theme

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç—ã
npm run build:css    # –î–æ–ª–∂–µ–Ω —Å–æ–±—Ä–∞—Ç—å SCSS -> CSS
npm run build:js     # –î–æ–ª–∂–µ–Ω —Å–æ–±—Ä–∞—Ç—å JS -> min.js
npm run build        # –î–æ–ª–∂–µ–Ω —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë
```

---

## üî® Git Hooks (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±–∏–ª–¥)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–∏ –∫–∞–∂–¥–æ–º `git commit`:

1. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**, –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ SCSS –∏–ª–∏ JS –∏—Å—Ö–æ–¥–Ω–∏–∫–∏
2. –ï—Å–ª–∏ –¥–∞ ‚Äî **–±–∏–ª–¥–∏—Ç** –∞—Å—Å–µ—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
3. **–î–æ–±–∞–≤–ª—è–µ—Ç** —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –∫–æ–º–º–∏—Ç
4. –ï—Å–ª–∏ –±–∏–ª–¥ —É–ø–∞–ª ‚Äî **–æ—Ç–º–µ–Ω—è–µ—Ç** –∫–æ–º–º–∏—Ç

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å –ø—Ä–æ `npm run build`  
‚úÖ –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–µ –∞—Å—Å–µ—Ç—ã –≤ git  
‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏  
‚úÖ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–ø—Ä–æ—Å—Ç–æ `git pull`)

### –ß—Ç–æ –±–∏–ª–¥–∏—Ç—Å—è

```bash
# SCSS -> CSS
assets/scss/main.scss       ‚Üí assets/css/main.css
assets/scss/admin.scss      ‚Üí assets/css/admin.css

# JS -> Minified JS
assets/js/src/main.js       ‚Üí assets/js/main.min.js
assets/js/src/admin.js      ‚Üí assets/js/admin.min.js
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–±–∏–ª–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
git commit --no-verify -m "commit message"
```

---

## ‚úÖ Pre-deployment Checklist

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ PROD –¥–µ–ø–ª–æ–µ–º.

### 10 –ø—Ä–æ–≤–µ—Ä–æ–∫:

1. **Git —Å—Ç–∞—Ç—É—Å** ‚Äî –Ω–µ—Ç –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–°–æ–±—Ä–∞–Ω–Ω—ã–µ –∞—Å—Å–µ—Ç—ã** ‚Äî CSS/JS —Ñ–∞–π–ª—ã —Å–≤–µ–∂–∏–µ
3. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** ‚Äî package-lock.json –∞–∫—Ç—É–∞–ª–µ–Ω
4. **PHP —Å–∏–Ω—Ç–∞–∫—Å–∏—Å** ‚Äî –Ω–µ—Ç –æ—à–∏–±–æ–∫ –≤ PHP
5. **–í–µ—Ä—Å–∏—è —Ç–µ–º—ã** ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ style.css
6. **–ú–∏–≥—Ä–∞—Ü–∏–∏** ‚Äî –µ—Å—Ç—å –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
7. **.gitignore** ‚Äî —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ù–ï –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
8. **–°–µ—Ä–≤–µ—Ä** ‚Äî PROD –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ SSH
9. **–î–∏—Å–∫** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
10. **–ë—ç–∫–∞–ø** ‚Äî –µ—Å—Ç—å –Ω–µ–¥–∞–≤–Ω–∏–π –±—ç–∫–∞–ø

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
./deployment-scripts/pre-deployment-checklist.sh
```

---

## üß™ Smoke Tests

–ó–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ PROD –¥–µ–ø–ª–æ—è.

### 8 —Ç–µ—Å—Ç–æ–≤:

1. **Homepage** ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTTP 200
2. **REST API** ‚Äî `/wp-json/` —Ä–∞–±–æ—Ç–∞–µ—Ç
3. **Admin Ajax** ‚Äî admin-ajax.php –¥–æ—Å—Ç—É–ø–µ–Ω
4. **CSS** ‚Äî —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
5. **JS** ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
6. **PHP –æ—à–∏–±–∫–∏** ‚Äî –Ω–µ—Ç fatal errors –≤ –ª–æ–≥–∞—Ö
7. **–°–∫–æ—Ä–æ—Å—Ç—å** ‚Äî response time < 5 —Å–µ–∫
8. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** ‚Äî –æ –≥–∞–ª–µ—Ä–µ–µ, –∞—Ñ–∏—à–∞, –∫–æ–Ω—Ç–∞–∫—Ç—ã

### –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –î–ª—è PROD
./deployment-scripts/smoke-tests.sh prod

# –î–ª—è DEV
./deployment-scripts/smoke-tests.sh dev
```

---

## üîô Rollback

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- ‚ùå –î–µ–ø–ª–æ–π —Å–ª–æ–º–∞–ª —Å–∞–π—Ç
- ‚ùå Smoke tests failed
- ‚ùå –ë–∞–≥ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±—ç–∫–∞–ø–æ–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
2. –í—ã–±–∏—Ä–∞–µ—à—å –Ω—É–∂–Ω—ã–π
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (type "yes")
4. Maintenance mode ON
5. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ë–î
6. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Ç–µ–º—ã
7. –û—á–∏—â–∞–µ—Ç –∫–µ—à
8. Maintenance mode OFF

### –ü—Ä–∏–º–µ—Ä

```bash
./deployment-scripts/rollback.sh prod

# –í—ã–≤–æ–¥:
# Available backups:
# [1] backup-20251028-143000.sql.gz (2 hours ago)
# [2] backup-20251027-101500.sql.gz (1 day ago)
# [3] backup-20251026-164500.sql.gz (2 days ago)
#
# Select backup to restore [1-3]: 1
```

---

## ‚ö° Hotfix

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –Ω–∞ –ø—Ä–æ–¥–µ
- üî• –°—Ä–æ—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- üî• –ù—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –º–∏–Ω—É—è –æ–±—ã—á–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### Workflow

```bash
# 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ –ª–æ–∫–∞–ª—å–Ω–æ
vim www/wordpress/wp-content/themes/your-theme/template.php

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å hotfix —Å–∫—Ä–∏–ø—Ç
./deployment-scripts/hotfix.sh "Fix cart calculation bug"

# 3. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
#    - —Å–æ–∑–¥–∞—Å—Ç –≤–µ—Ç–∫—É hotfix/fix-cart-calculation-bug
#    - –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
#    - –∑–∞–ø—É—à–∏—Ç –≤ remote
#    - –ø—Ä–µ–¥–ª–æ–∂–∏—Ç merge –≤ main
#    - –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Å—Ä–∞–∑—É

# 4. –ì–æ—Ç–æ–≤–æ! üéâ
```

### –ü–ª—é—Å—ã

‚úÖ –ë—ã—Å—Ç—Ä—ã–π workflow  
‚úÖ –ù–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç dev –≤–µ—Ç–∫—É  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge –≤ main  
‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π instant deploy  
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ hotfix –≤–µ—Ç–∫–∏

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –í–∞—Ä–∏–∞–Ω—Ç | –ß–∞—Å—Ç–æ—Ç–∞ | –ö–æ–º–∞–Ω–¥–∞ | –ë—ç–∫–∞–ø | –¢–µ—Å—Ç—ã | Maintenance |
|---------|---------|---------|-------|-------|-------------|
| 1. First DEV | 1 —Ä–∞–∑ | SSH + git clone | ‚ùå | ‚ùå | ‚ùå |
| 2. Regular DEV | –µ–∂–µ–¥–Ω–µ–≤–Ω–æ | `deploy-dev.sh` | ‚ùå | ‚ùå | ‚ùå |
| 3. First PROD | 1 —Ä–∞–∑ | SSH + git clone | ‚úÖ | ‚úÖ | ‚úÖ |
| 4. Release PROD | –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ | `deploy-prod.sh` | ‚úÖ | ‚úÖ | ‚úÖ |
| 5. Hotfix | –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ | `hotfix.sh` | ‚úÖ | ‚úÖ | ‚úÖ |
| 6. Rollback | –ø—Ä–∏ –æ—à–∏–±–∫–µ | `rollback.sh` | ‚úÖ | ‚ùå | ‚úÖ |

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –û–±—ã—á–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –†–∞–±–æ—Ç–∞–µ–º –≤ dev –≤–µ—Ç–∫–µ
git checkout dev

# 2. –î–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
vim www/wordpress/wp-content/themes/your-theme/functions.php

# 3. –ö–æ–º–º–∏—Ç–∏–º (–∞–≤—Ç–æ–±–∏–ª–¥ –∞—Å—Å–µ—Ç–æ–≤)
git add .
git commit -m "feat: add new feature"
git push origin dev

# 4. –î–µ–ø–ª–æ–∏–º –Ω–∞ DEV
./deployment-scripts/deploy-dev.sh

# 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ dev.your-domain.com
# 6. –ï—Å–ª–∏ –û–ö, –¥–µ–ª–∞–µ–º PR: dev -> main
# 7. –ü–æ—Å–ª–µ merge, –¥–µ–ø–ª–æ–∏–º –Ω–∞ PROD
./deployment-scripts/deploy-prod.sh
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°—Ä–æ—á–Ω—ã–π hotfix

```bash
# 1. –û–±–Ω–∞—Ä—É–∂–∏–ª–∏ –±–∞–≥ –Ω–∞ –ø—Ä–æ–¥–µ
# 2. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
vim www/wordpress/wp-content/themes/your-theme/cart.php

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º hotfix
./deployment-scripts/hotfix.sh "Fix cart bug"

# 4. –°–ª–µ–¥—É–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —Å–∫—Ä–∏–ø—Ç–∞
# 5. –ì–æ—Ç–æ–≤–æ! Hotfix –Ω–∞ –ø—Ä–æ–¥–µ —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

```bash
# 1. –î–µ–ø–ª–æ–π –ø—Ä–æ—à—ë–ª, –Ω–æ —Å–∞–π—Ç —Å–ª–æ–º–∞–Ω
# 2. –ó–∞–ø—É—Å–∫–∞–µ–º rollback
./deployment-scripts/rollback.sh prod

# 3. –í—ã–±–∏—Ä–∞–µ–º –±—ç–∫–∞–ø –¥–æ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
# 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º
# 5. –°–∞–π—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
```

---

## üõ†Ô∏è Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Git hook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞
ls -la .git/hooks/pre-commit

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
chmod +x .git/hooks/pre-commit

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ npm
cd www/wordpress/wp-content/themes/your-theme
npm run build
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSH –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials –≤ config.sh
cat deployment-scripts/config.sh | grep PROD_SSH

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
ssh your_ssh_user@your_server_ip

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SSH –∫–ª—é—á–∏
ssh-add -l
```

### –ü—Ä–æ–±–ª–µ–º–∞: Smoke tests –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
./deployment-scripts/smoke-tests.sh prod

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh your_ssh_user@your_server_ip
tail -50 /home/your_ssh_user/logs/error.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh your_ssh_user@your_server_ip
cd /home/your_ssh_user/your-domain.com
wp your-project migrate:status
wp your-project migrate --debug
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [CI_CD_DEPLOYMENT_PLAN.md](../CI_CD_DEPLOYMENT_PLAN.md) ‚Äî –ø–æ–ª–Ω—ã–π –ø–ª–∞–Ω CI/CD
- [GIT_HOOKS_SETUP.md](../GIT_HOOKS_SETUP.md) ‚Äî –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ git hooks
- [creds.txt](../creds.txt) ‚Äî credentials —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)

---

## ‚ú® Best Practices

1. **–í—Å–µ–≥–¥–∞ –±–∏–ª–¥–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ** (—á–µ—Ä–µ–∑ git hook)
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ DEV** –ø–µ—Ä–µ–¥ PROD
3. **–î–µ–ª–∞—Ç—å –±—ç–∫–∞–ø—ã** –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º PROD –¥–µ–ø–ª–æ–µ–º
4. **–ó–∞–ø—É—Å–∫–∞—Ç—å smoke tests** –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
5. **–ò–º–µ—Ç—å –ø–ª–∞–Ω rollback** –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º
6. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å hotfix** —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–∞–≥–æ–≤
7. **–ö–æ–º–º–∏—Ç–∏—Ç—å —á–∞—Å—Ç–æ**, –¥–µ–ø–ª–æ–∏—Ç—å —Ä–µ–∂–µ
8. **–ù–µ –ø—É—à–∏—Ç—å –≤ main** –Ω–∞–ø—Ä—è–º—É—é, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ PR –∏–ª–∏ hotfix

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–µ–ø–ª–æ—è —Å:

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –±–∏–ª–¥–æ–º –∞—Å—Å–µ—Ç–æ–≤
- ‚úÖ Pre-deployment checklist
- ‚úÖ Smoke tests
- ‚úÖ Rollback –º–µ—Ö–∞–Ω–∏–∑–º–æ–º
- ‚úÖ Hotfix workflow
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- ‚úÖ –ë—ç–∫–∞–ø–∞–º–∏

**–ù–∞—á–Ω–∏—Ç–µ —Å:**

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `deployment-scripts/config.sh`
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å `./deployment-scripts/deploy-dev.sh`
3. –°–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–π PROD –¥–µ–ø–ª–æ–π `./deployment-scripts/deploy-prod.sh`

–£–¥–∞—á–∏! üöÄ
